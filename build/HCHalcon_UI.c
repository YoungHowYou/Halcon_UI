/***********************************************************
 * File generated by the HALCON-Compiler hcomp version 24.11
 * Usage: Interface to C
 *
 * Software by: MVTec Software GmbH, www.mvtec.com
 ***********************************************************/


#include "HCHalcon_UI.h"

extern HUserImport int HHalcon_UIGetOffset();

int offset = -1;

Herror HcPreCallUser(int proc_index_local, Hproc_handle *proc_handle)
{
  if (offset < 0)
  {
    /* First use of this extension package, query my offset */
    if (0 > (offset = HHalcon_UIGetOffset()))
    {
      /*
       * Either the HALCON library was not initialized or the extension package
       * was not loaded. Make sure HALCON is initialized and check the offset
       * again.
       */
      Herror err = HcPreCall(-1, proc_handle);
      if (H_MSG_OK != err)
        return err;
      if (0 > (offset = HHalcon_UIGetOffset()))
      {
        /* The extension package could not be loaded. */
        return H_ERR_UEXTNI;
      }
      HcPostCall(*proc_handle, H_MSG_OK);
      *proc_handle = NULL;
    }
  }
  return HcPreCall(offset + proc_index_local, proc_handle);
}

HUserExport Herror T_Open_Frameworkwindows(const Htuple DictHandle, const Htuple OutQueueHandle)
{
  Hproc_handle ph;
  Herror err = H_MSG_OK;

  err = HcPreCallUser(0,&ph);
  if (err == H_MSG_OK) err = HcStoreICT(ph,0,&DictHandle);
  if (err == H_MSG_OK) err = HcStoreICT(ph,1,&OutQueueHandle);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

HUserExport Herror Open_Frameworkwindows(Hlong DictHandle, Hlong OutQueueHandle)
{
  Hproc_handle ph;
  Herror err;
  err = HcPreCallUser(0,&ph);
  if (err == H_MSG_OK) HcStoreICL(ph,0,DictHandle);
  if (err == H_MSG_OK) HcStoreICL(ph,1,OutQueueHandle);
  if (err == H_MSG_OK)
  {
    err = HcCall(ph);
  }
  return HcPostCall(ph,err);
}

