/***********************************************************
 * File generated by the HALCON-Compiler hcomp version 24.11
 * Usage: Interface to C++
 *
 * Software by: MVTec Software GmbH, www.mvtec.com
 ***********************************************************/


#include "HCPPHalcon_UI.h"

#ifndef __APPLE__
#  include "halconcpp/HalconAPI.h"
#else
#  ifndef HC_LARGE_IMAGES
#    include <HALCONCpp/HalconAPI.h>
#  else
#    include <HALCONCppxl/HalconAPI.h>
#  endif
#endif

extern "C" HUserImport int HHalcon_UIGetOffset();

int offset = -1;

using namespace HalconCpp;

Hproc_handle PreCallUser(int proc_index_local)
{
  if (offset < 0)
  {
    /* First use of this extension package, query my offset */
    if (0 > (offset = HHalcon_UIGetOffset()))
    {
      /*
       * Either the HALCON library was not initialized or the extension package
       * was not loaded. Make sure HALCON is initialized and check the offset
       * again.
       */
      Hproc_handle tmp = HalconAPI::PreCall(0);
      HalconAPI::PostCall(tmp);
      if (0 > (offset = HHalcon_UIGetOffset()))
      {
        /* The extension package could not be loaded. */
        HOperatorException::Throw(-1,H_ERR_UEXTNI);
      }
    }
  }
  return HalconAPI::PreCall(offset + proc_index_local);
}




#ifdef OpenFrameworkwindows
# error An existing macro name conflicts with OpenFrameworkwindows
#endif
HUserExport void HalconCpp::OpenFrameworkwindows(const HTuple& DictHandle, const HTuple& OutQueueHandle)
{
  Hproc_handle proc = PreCallUser(0);
  HalconAPI::Store(proc,0,DictHandle);
  HalconAPI::Store(proc,1,OutQueueHandle);
  HalconAPI::CallProcedure(proc);
  HalconAPI::PostCall(proc);
}

